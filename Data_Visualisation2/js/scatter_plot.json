{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
    "url": "https://raw.githubusercontent.com/dcha0082/3179/refs/heads/main/Data_Visualisation2/data/Kangaroo-Population-test.csv",
    "format": {
      "type": "csv"
    }
  },
  "params": [
    {
      "name": "populationRange",
      "value": 100,
      "bind": {
        "input": "range",
        "min": 0,
        "max": 1700, 
        "step": 20,
        "name": "Kangaroo Population Above (thousands): "
      }
    },
    {
        "name": "harvestRange",
        "value": 0,
        "bind": {
            "input": "range",
            "min": 0,
            "max": 100000,
            "step": 1000,
            "name": "Harvest Amount Above: "
        }
    }
  ],
  "transform": [
    {
      "calculate": "datum['Population (p)'] / 1000",
      "as": "Population (thousands)"
    },
    {
      "filter": "datum['Population (thousands)'] >= populationRange && datum['Harvest'] >= harvestRange"
    }
  ],
  "width": 800,
  "height": 400,
  "encoding": {
      "x": {
          "field": "Population (thousands)",
          "type": "quantitative",
          "scale": {
            "type": "log",
            "nice": false
        },
          "axis": {"title": "Population (thousands) in log scale"}
      },
      "y": {
          "field": "Harvest",
          "type": "quantitative",
          "axis": {"title": "Harvest Amount"}
      }
  },
  "layer": [
      {
          "mark": "point",
          "encoding": {
              "color": {
                  "field": "Year",
                  "type": "nominal",
                  "legend": {"title": "Year"}
              },
              "tooltip": [
                  {"field": "Year", "type": "ordinal", "title": "Year"},
                  {"field": "Zone", "type": "nominal", "title": "Zone"},
                  {"field": "Kangaroo Type", "type": "nominal", "title": "Kangaroo Type"},
                  {"field": "Population (thousands)", "type": "quantitative", "title": "Population (thousands)", "format": ".2f"},
                  {"field": "Harvest", "type": "quantitative", "title": "Harvest", "format": ","}
              ]
          }
      },
      {
          "mark": {
              "type": "text",
              "align": "left",
              "baseline": "middle",
              "dx": -25,   
              "dy": -8, 
              "fontSize": 11.5,
              "fontStyle": "italic"
          },
          "transform": [
              {
                  "filter": "datum['Population (p)'] == 1281119 || datum['Population (p)'] == 1135531 || datum['Population (p)'] == 308590 || datum['Population (p)'] == 1179380 || datum['Population (p)'] == 442522 || datum['Population (p)'] == 159545 || datum['Population (p)'] == 18568"
              }
          ],
          "encoding": {
              "text": {
                  "field": "Zone"
              },
              "color": {
                  "value": "black"
              },
              "opacity": {
                  "value": 1
              }
          }
      }
  ],
  "title": {
    "text": "Kangaroo Population (thousands) vs. Harvest Amount by Zone",
    "anchor": "middle"
  }
}
